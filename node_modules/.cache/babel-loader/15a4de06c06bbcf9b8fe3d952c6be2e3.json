{"ast":null,"code":"import _defineProperty from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joseph/Documents/GitHub/React-Gallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";//Project Dependencies\nimport React,{Component}from'react';import'./App.css';import{Route,Redirect,Switch}from'react-router-dom';import axios from'axios';//App Components\nimport SearchForm from'./components/SearchForm';import Nav from'./components/Nav';import PhotoContainer from'./components/PhotoContainer';//Flickr API\nimport apiKey from'./config';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={images:{beach:[],mountain:[],desert:[]}};_this.requestFlickrURLs=function(query){axios.get(\"https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=\".concat(apiKey,\"&tags=\").concat(query,\"&per_page=24&format=json&nojsoncallback=1&sort=relevance\")).then(function(response){//Make sure Flickr returns a real response\nif(typeof response.data==='object'){_this.setState(function(prevState){return{images:_objectSpread({},prevState.images,_defineProperty({},query,response.data.photos.photo))};});}}).catch(function(error){// handle error\nconsole.log(error);});};return _this;}_createClass(App,[{key:\"componentDidMount\",//When App component mounts, request data for 3 presets\nvalue:function componentDidMount(){this.requestFlickrURLs('beach');this.requestFlickrURLs('mountain');this.requestFlickrURLs('desert');//If not on the homepage already, take the url parameter and make Flickr request\nvar currentURLQuery=this.props.location.pathname.slice(1);if(currentURLQuery){this.requestFlickrURLs(currentURLQuery);}}//Use Axios to get image data for the query. Query comes from URL or from user search\n},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"container\"},React.createElement(Route,{path:\"/\",render:function render(props){return React.createElement(SearchForm,Object.assign({},props,{onSearch:_this2.requestFlickrURLs}));}}),React.createElement(Route,{path:\"/\",component:Nav}),React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\"},React.createElement(Redirect,{to:\"/beach\"})),React.createElement(Route,{path:\"/:search\",render:function render(){return React.createElement(PhotoContainer,{data:_this2.state.images});}})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/joseph/Documents/GitHub/React-Gallery/src/App.js"],"names":["React","Component","Route","Redirect","Switch","axios","SearchForm","Nav","PhotoContainer","apiKey","App","state","images","beach","mountain","desert","requestFlickrURLs","query","get","then","response","data","setState","prevState","photos","photo","catch","error","console","log","currentURLQuery","props","location","pathname","slice"],"mappings":"ooCAAA;AACA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,WAAP,CACA,OACEC,KADF,CAEEC,QAFF,CAGEC,MAHF,KAIO,kBAJP,CAKA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA;AACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,GAAP,KAAgB,kBAAhB,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,GAGMC,CAAAA,G,mXAGJC,K,CAAQ,CACNC,MAAM,CAAE,CACNC,KAAK,CAAC,EADA,CAENC,QAAQ,CAAC,EAFH,CAGNC,MAAM,CAAC,EAHD,CADF,C,OAsBRC,iB,CAAoB,SAACC,KAAD,CAAW,CAC7BZ,KAAK,CAACa,GAAN,qFAAuFT,MAAvF,kBAAsGQ,KAAtG,8DACGE,IADH,CACS,SAAAC,QAAQ,CAAI,CACjB;AACA,GAAG,MAAOA,CAAAA,QAAQ,CAACC,IAAhB,GAAyB,QAA5B,CAAsC,CACpC,MAAKC,QAAL,CAAc,SAAAC,SAAS,CAAI,CACzB,MAAO,CACLX,MAAM,kBACDW,SAAS,CAACX,MADT,oBAEHK,KAFG,CAEKG,QAAQ,CAACC,IAAT,CAAcG,MAAd,CAAqBC,KAF1B,EADD,CAAP,CAMD,CAPD,EAQD,CACJ,CAbD,EAcGC,KAdH,CAcS,SAAUC,KAAV,CAAiB,CACtB;AACAC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAjBD,EAkBD,C,0DAjCD;kCACoB,CAClB,KAAKX,iBAAL,CAAuB,OAAvB,EACA,KAAKA,iBAAL,CAAuB,UAAvB,EACA,KAAKA,iBAAL,CAAuB,QAAvB,EAEA;AACA,GAAIc,CAAAA,eAAe,CAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,QAApB,CAA6BC,KAA7B,CAAmC,CAAnC,CAAtB,CACA,GAAGJ,eAAH,CAAoB,CAClB,KAAKd,iBAAL,CAAuBc,eAAvB,EACD,CACF,CAED;uCAsBS,iBAEP,MACI,4BAAK,SAAS,CAAC,WAAf,EAOE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,MAAM,CAAE,gBAACC,KAAD,QAAW,qBAAC,UAAD,kBAAgBA,KAAhB,EAAuB,QAAQ,CAAE,MAAI,CAACf,iBAAtC,GAAX,EAAxB,EAPF,CAQE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAET,GAA3B,EARF,CASE,oBAAC,MAAD,MACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAE,GAAnB,EACE,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EADF,CADF,CAIE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,MAAM,CAAG,wBAAM,qBAAC,cAAD,EAAgB,IAAI,CAAE,MAAI,CAACI,KAAL,CAAWC,MAAjC,EAAN,EAAhC,EAJF,CATF,CADJ,CAmBD,C,iBAnEeX,S,EAsElB,cAAeS,CAAAA,GAAf","sourcesContent":["//Project Dependencies\nimport React, {Component} from 'react';\nimport './App.css';\nimport {\n  Route,\n  Redirect,\n  Switch\n} from 'react-router-dom';\nimport axios from 'axios';\n\n\n//App Components\nimport SearchForm from './components/SearchForm';\nimport Nav from './components/Nav';\nimport PhotoContainer from './components/PhotoContainer';\n\n//Flickr API\nimport apiKey from './config';\n\n\nclass App extends Component {\n\n  //State is declared with image objects as empty arrays\n  state = {\n    images: {\n      beach:[],\n      mountain:[],\n      desert:[]\n    },\n  }\n\n  //When App component mounts, request data for 3 presets\n  componentDidMount() {\n    this.requestFlickrURLs('beach');\n    this.requestFlickrURLs('mountain');\n    this.requestFlickrURLs('desert');\n\n    //If not on the homepage already, take the url parameter and make Flickr request\n    let currentURLQuery = this.props.location.pathname.slice(1);\n    if(currentURLQuery) {\n      this.requestFlickrURLs(currentURLQuery)\n    }    \n  }\n\n  //Use Axios to get image data for the query. Query comes from URL or from user search\n  requestFlickrURLs = (query) => {\n    axios.get(`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${apiKey}&tags=${query}&per_page=24&format=json&nojsoncallback=1&sort=relevance`)\n      .then( response => {\n        //Make sure Flickr returns a real response\n        if(typeof response.data === 'object') {\n          this.setState(prevState => {\n            return {\n              images: {\n                ...prevState.images,\n                [query]: response.data.photos.photo\n              },\n            }\n          })\n        }\n    })\n      .catch(function (error) {\n        // handle error\n        console.log(error);\n    });\n  }\n\n  render() {\n    \n    return (\n        <div className=\"container\">\n\n          {/* * *\n          * Entire App is wrapped in Browser Router in the index.js main file.\n          * Load search form passing flickr request function in as props. Load nav component. \n          * When app loads or if url path is blank, redirect to \"/beaches\". Otherwise, redirect to custom search query  \n          * * */}\n          <Route path=\"/\" render={(props) => <SearchForm {...props} onSearch={this.requestFlickrURLs} />} />\n          <Route path=\"/\" component={Nav} />\n          <Switch>\n            <Route exact path =\"/\">\n              <Redirect to=\"/beach\" />\n            </Route>\n            <Route path=\"/:search\" render={ () => <PhotoContainer data={this.state.images} /> } />\n          </Switch>\n\n        </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}